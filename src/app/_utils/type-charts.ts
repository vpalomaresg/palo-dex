import { PokemonType } from "../_types/pokemon.type";

export const TYPE_CHART_EFFECTIVENESS = {
  normal: {
    normal: 1,
    fire: 1,
    water: 1,
    eléctrico: 1,
    planta: 1,
    ice: 1,
    fighting: 1,
    poison: 1,
    ground: 1,
    flying: 1,
    psíquico: 1,
    bug: 1,
    rock: 0.5,
    ghost: 0,
    dragon: 1,
    dark: 1,
    steel: 0.5,
  },
  fire: {
    normal: 1,
    fire: 0.5,
    water: 0.5,
    eléctrico: 1,
    planta: 2,
    ice: 2,
    fighting: 1,
    poison: 1,
    ground: 1,
    flying: 1,
    psíquico: 1,
    bug: 2,
    rock: 0.5,
    ghost: 1,
    dragon: 0.5,
    dark: 1,
    steel: 2,
  },
  water: {
    normal: 1,
    fire: 2,
    water: 0.5,
    eléctrico: 1,
    planta: 0.5,
    ice: 1,
    fighting: 1,
    poison: 1,
    ground: 2,
    flying: 1,
    psíquico: 1,
    bug: 1,
    rock: 2,
    ghost: 1,
    dragon: 0.5,
    dark: 1,
    steel: 1,
  },
  eléctrico: {
    normal: 1,
    fire: 1,
    water: 2,
    eléctrico: 0.5,
    planta: 0.5,
    ice: 1,
    fighting: 1,
    poison: 1,
    ground: 0,
    flying: 2,
    psíquico: 1,
    bug: 1,
    rock: 1,
    ghost: 1,
    dragon: 0.5,
    dark: 1,
    steel: 1,
  },
  planta: {
    normal: 1,
    fire: 0.5,
    water: 2,
    eléctrico: 1,
    planta: 0.5,
    ice: 1,
    fighting: 1,
    poison: 0.5,
    ground: 2,
    flying: 0.5,
    psíquico: 1,
    bug: 0.5,
    rock: 2,
    ghost: 1,
    dragon: 0.5,
    dark: 1,
    steel: 0.5,
  },
  ice: {
    normal: 1,
    fire: 0.5,
    water: 0.5,
    eléctrico: 1,
    planta: 2,
    ice: 0.5,
    fighting: 1,
    poison: 1,
    ground: 2,
    flying: 2,
    psíquico: 1,
    bug: 1,
    rock: 1,
    ghost: 1,
    dragon: 2,
    dark: 1,
    steel: 0.5,
  },
  fighting: {
    normal: 2,
    fire: 1,
    water: 1,
    eléctrico: 1,
    planta: 1,
    ice: 2,
    fighting: 1,
    poison: 0.5,
    ground: 1,
    flying: 0.5,
    psíquico: 0.5,
    bug: 0.5,
    rock: 2,
    ghost: 0,
    dragon: 1,
    dark: 2,
    steel: 2,
  },
  poison: {
    normal: 1,
    fire: 1,
    water: 1,
    eléctrico: 1,
    planta: 2,
    ice: 1,
    fighting: 1,
    poison: 0.5,
    ground: 0.5,
    flying: 1,
    psíquico: 1,
    bug: 1,
    rock: 0.5,
    ghost: 0.5,
    dragon: 1,
    dark: 1,
    steel: 0,
  },
  ground: {
    normal: 1,
    fire: 2,
    water: 1,
    eléctrico: 2,
    planta: 0.5,
    ice: 1,
    fighting: 1,
    poison: 2,
    ground: 1,
    flying: 0,
    psíquico: 1,
    bug: 0.5,
    rock: 2,
    ghost: 1,
    dragon: 1,
    dark: 1,
    steel: 2,
  },
  flying: {
    normal: 1,
    fire: 1,
    water: 1,
    eléctrico: 0.5,
    planta: 2,
    ice: 1,
    fighting: 2,
    poison: 1,
    ground: 1,
    flying: 1,
    psíquico: 1,
    bug: 2,
    rock: 0.5,
    ghost: 1,
    dragon: 1,
    dark: 1,
    steel: 0.5,
  },
  psíquico: {
    normal: 1,
    fire: 1,
    water: 1,
    eléctrico: 1,
    planta: 1,
    ice: 1,
    fighting: 2,
    poison: 2,
    ground: 1,
    flying: 1,
    psíquico: 0.5,
    bug: 1,
    rock: 1,
    ghost: 1,
    dragon: 1,
    dark: 0,
    steel: 0.5,
  },
  bug: {
    normal: 1,
    fire: 0.5,
    water: 1,
    eléctrico: 1,
    planta: 2,
    ice: 1,
    fighting: 0.5,
    poison: 0.5,
    ground: 1,
    flying: 0.5,
    psíquico: 2,
    bug: 1,
    rock: 1,
    ghost: 0.5,
    dragon: 1,
    dark: 2,
    steel: 0.5,
  },
  rock: {
    normal: 1,
    fire: 2,
    water: 1,
    eléctrico: 1,
    planta: 1,
    ice: 2,
    fighting: 0.5,
    poison: 1,
    ground: 0.5,
    flying: 2,
    psíquico: 1,
    bug: 2,
    rock: 1,
    ghost: 1,
    dragon: 1,
    dark: 1,
    steel: 0.5,
  },
  ghost: {
    normal: 0,
    fire: 1,
    water: 1,
    eléctrico: 1,
    planta: 1,
    ice: 1,
    fighting: 1,
    poison: 1,
    ground: 1,
    flying: 1,
    psíquico: 2,
    bug: 1,
    rock: 1,
    ghost: 2,
    dragon: 1,
    dark: 0.5,
    steel: 0.5,
  },
  dragon: {
    normal: 1,
    fire: 1,
    water: 1,
    eléctrico: 1,
    planta: 1,
    ice: 1,
    fighting: 1,
    poison: 1,
    ground: 1,
    flying: 1,
    psíquico: 1,
    bug: 1,
    rock: 1,
    ghost: 1,
    dragon: 2,
    dark: 1,
    steel: 0.5,
  },
  dark: {
    normal: 1,
    fire: 1,
    water: 1,
    eléctrico: 1,
    planta: 1,
    ice: 1,
    fighting: 0.5,
    poison: 1,
    ground: 1,
    flying: 1,
    psíquico: 2,
    bug: 1,
    rock: 1,
    ghost: 2,
    dragon: 1,
    dark: 0.5,
    steel: 0.5,
  },
  steel: {
    normal: 1,
    fire: 0.5,
    water: 0.5,
    eléctrico: 0.5,
    planta: 1,
    ice: 2,
    fighting: 1,
    poison: 1,
    ground: 1,
    flying: 1,
    psíquico: 1,
    bug: 1,
    rock: 2,
    ghost: 1,
    dragon: 1,
    dark: 1,
    steel: 0.5,
  },
};

export const TYPE_CHART_WEAKNESSES: Record<
  PokemonType,
  Record<PokemonType, number>
> = {
  normal: {
    normal: 1,
    fire: 1,
    water: 1,
    eléctrico: 1,
    planta: 1,
    ice: 1,
    fighting: 2,
    poison: 1,
    ground: 1,
    flying: 1,
    psíquico: 1,
    bug: 1,
    rock: 1,
    ghost: 0,
    dragon: 1,
    dark: 1,
    steel: 1,
    hada: 1,
  },
  fire: {
    normal: 1,
    fire: 0.5,
    water: 2,
    eléctrico: 1,
    planta: 0.5,
    ice: 0.5,
    fighting: 1,
    poison: 1,
    ground: 2,
    flying: 1,
    psíquico: 1,
    bug: 0.5,
    rock: 2,
    ghost: 1,
    dragon: 1,
    dark: 1,
    steel: 0.5,
    hada: 0.5,
  },
  water: {
    normal: 1,
    fire: 0.5,
    water: 0.5,
    eléctrico: 2,
    planta: 2,
    ice: 0.5,
    fighting: 1,
    poison: 1,
    ground: 1,
    flying: 1,
    psíquico: 1,
    bug: 1,
    rock: 1,
    ghost: 1,
    dragon: 1,
    dark: 1,
    steel: 0.5,
    hada: 1,
  },
  eléctrico: {
    normal: 1,
    fire: 1,
    water: 1,
    eléctrico: 0.5,
    planta: 1,
    ice: 1,
    fighting: 1,
    poison: 1,
    ground: 2,
    flying: 0.5,
    psíquico: 1,
    bug: 1,
    rock: 1,
    ghost: 1,
    dragon: 1,
    dark: 1,
    steel: 0.5,
    hada: 1,
  },
  planta: {
    normal: 1,
    fire: 2,
    water: 0.5,
    eléctrico: 0.5,
    planta: 0.5,
    ice: 2,
    fighting: 1,
    poison: 2,
    ground: 0.5,
    flying: 2,
    psíquico: 1,
    bug: 2,
    rock: 1,
    ghost: 1,
    dragon: 1,
    dark: 1,
    steel: 1,
    hada: 1,
  },
  ice: {
    normal: 1,
    fire: 2,
    water: 1,
    eléctrico: 1,
    planta: 1,
    ice: 0.5,
    fighting: 2,
    poison: 1,
    ground: 1,
    flying: 1,
    psíquico: 1,
    bug: 1,
    rock: 2,
    ghost: 1,
    dragon: 1,
    dark: 1,
    steel: 2,
    hada: 1,
  },
  fighting: {
    normal: 1,
    fire: 1,
    water: 1,
    eléctrico: 1,
    planta: 1,
    ice: 1,
    fighting: 1,
    poison: 1,
    ground: 1,
    flying: 2,
    psíquico: 2,
    bug: 0.5,
    rock: 0.5,
    ghost: 1,
    dragon: 1,
    dark: 0.5,
    steel: 1,
    hada: 2,
  },
  poison: {
    normal: 1,
    fire: 1,
    water: 1,
    eléctrico: 1,
    planta: 0.5,
    ice: 1,
    fighting: 0.5,
    poison: 0.5,
    ground: 2,
    flying: 1,
    psíquico: 2,
    bug: 0.5,
    rock: 1,
    ghost: 1,
    dragon: 1,
    dark: 1,
    steel: 1,
    hada: 0.5,
  },
  ground: {
    normal: 1,
    fire: 1,
    water: 2,
    eléctrico: 0,
    planta: 2,
    ice: 2,
    fighting: 1,
    poison: 0.5,
    ground: 1,
    flying: 1,
    psíquico: 1,
    bug: 1,
    rock: 0.5,
    ghost: 1,
    dragon: 1,
    dark: 1,
    steel: 1,
    hada: 0.5,
  },
  flying: {
    normal: 1,
    fire: 1,
    water: 1,
    eléctrico: 2,
    planta: 0.5,
    ice: 2,
    fighting: 0.5,
    poison: 1,
    ground: 0,
    flying: 1,
    psíquico: 1,
    bug: 0.5,
    rock: 2,
    ghost: 1,
    dragon: 1,
    dark: 1,
    steel: 1,
    hada: 1,
  },
  psíquico: {
    normal: 1,
    fire: 1,
    water: 1,
    eléctrico: 1,
    planta: 1,
    ice: 1,
    fighting: 0.5,
    poison: 1,
    ground: 1,
    flying: 1,
    psíquico: 0.5,
    bug: 2,
    rock: 1,
    ghost: 2,
    dragon: 1,
    dark: 2,
    steel: 1,
    hada: 1,
  },
  bug: {
    normal: 1,
    fire: 2,
    water: 1,
    eléctrico: 1,
    planta: 0.5,
    ice: 1,
    fighting: 0.5,
    poison: 1,
    ground: 0.5,
    flying: 2,
    psíquico: 1,
    bug: 1,
    rock: 2,
    ghost: 1,
    dragon: 1,
    dark: 1,
    steel: 1,
    hada: 1,
  },
  rock: {
    normal: 0.5,
    fire: 0.5,
    water: 2,
    eléctrico: 1,
    planta: 2,
    ice: 1,
    fighting: 2,
    poison: 0.5,
    ground: 2,
    flying: 0.5,
    psíquico: 1,
    bug: 1,
    rock: 1,
    ghost: 1,
    dragon: 1,
    dark: 1,
    steel: 2,
    hada: 1,
  },
  ghost: {
    normal: 0,
    fire: 1,
    water: 1,
    eléctrico: 1,
    planta: 1,
    ice: 1,
    fighting: 0,
    poison: 0.5,
    ground: 1,
    flying: 1,
    psíquico: 1,
    bug: 0.5,
    rock: 1,
    ghost: 2,
    dragon: 1,
    dark: 2,
    steel: 1,
    hada: 1,
  },
  dragon: {
    normal: 1,
    fire: 0.5,
    water: 0.5,
    eléctrico: 0.5,
    planta: 0.5,
    ice: 2,
    fighting: 1,
    poison: 1,
    ground: 1,
    flying: 1,
    psíquico: 1,
    bug: 1,
    rock: 1,
    ghost: 1,
    dragon: 2,
    dark: 1,
    steel: 1,
    hada: 2,
  },
  dark: {
    normal: 1,
    fire: 1,
    water: 1,
    eléctrico: 1,
    planta: 1,
    ice: 1,
    fighting: 2,
    poison: 1,
    ground: 1,
    flying: 1,
    psíquico: 0,
    bug: 2,
    rock: 1,
    ghost: 0.5,
    dragon: 1,
    dark: 0.5,
    steel: 1,
    hada: 2,
  },
  steel: {
    normal: 0.5,
    fire: 2,
    water: 1,
    eléctrico: 1,
    planta: 0.5,
    ice: 0.5,
    fighting: 2,
    poison: 0,
    ground: 2,
    flying: 0.5,
    psíquico: 0.5,
    bug: 0.5,
    rock: 0.5,
    ghost: 0.5,
    dragon: 0.5,
    dark: 0.5,
    steel: 0.5,
    hada: 0.5,
  },
  hada: {
    normal: 1,
    fire: 1,
    water: 1,
    eléctrico: 1,
    planta: 1,
    ice: 1,
    fighting: 0.5,
    poison: 2,
    ground: 1,
    flying: 1,
    psíquico: 1,
    bug: 0.5,
    rock: 1,
    ghost: 1,
    dragon: 0,
    dark: 0.5,
    steel: 2,
    hada: 1,
  },
};

const defaultDamageRelation: Record<PokemonType, number> = {
  normal: 1,
  fire: 1,
  water: 1,
  eléctrico: 1,
  planta: 1,
  ice: 1,
  fighting: 1,
  poison: 1,
  ground: 1,
  flying: 1,
  psíquico: 1,
  bug: 1,
  rock: 1,
  ghost: 1,
  dragon: 1,
  dark: 1,
  steel: 1,
  hada: 1,
};

export function getDefaultDamageRelation(): Record<PokemonType, number> {
  return JSON.parse(JSON.stringify(defaultDamageRelation));
}

export function getDamageRelation(
  types: PokemonType[],
): Record<PokemonType, number> {
  if (types.length == 1) {
    return TYPE_CHART_WEAKNESSES[types[0]];
  } else {
    const chart1 = { ...TYPE_CHART_WEAKNESSES[types[0]] };
    const chart2 = TYPE_CHART_WEAKNESSES[types[1]];

    for (const pokemonType in chart1) {
      if (
        chart1.hasOwnProperty(pokemonType) &&
        chart2.hasOwnProperty(pokemonType)
      ) {
        chart1[pokemonType as PokemonType] *=
          chart2[pokemonType as PokemonType];
      }
    }
    return chart1;
  }
}
