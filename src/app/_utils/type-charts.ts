import { PokemonType } from "../_types/pokemon.type";

export const TYPE_CHART_EFFECTIVENESS = {
  normal: {
    normal: 1,
    fuego: 1,
    agua: 1,
    eléctrico: 1,
    planta: 1,
    hielo: 1,
    lucha: 1,
    veneno: 1,
    tierra: 1,
    volador: 1,
    psíquico: 1,
    bicho: 1,
    roca: 0.5,
    fantasma: 0,
    dragón: 1,
    siniestro: 1,
    acero: 0.5,
  },
  fuego: {
    normal: 1,
    fuego: 0.5,
    agua: 0.5,
    eléctrico: 1,
    planta: 2,
    hielo: 2,
    lucha: 1,
    veneno: 1,
    tierra: 1,
    volador: 1,
    psíquico: 1,
    bicho: 2,
    roca: 0.5,
    fantasma: 1,
    dragón: 0.5,
    siniestro: 1,
    acero: 2,
  },
  agua: {
    normal: 1,
    fuego: 2,
    agua: 0.5,
    eléctrico: 1,
    planta: 0.5,
    hielo: 1,
    lucha: 1,
    veneno: 1,
    tierra: 2,
    volador: 1,
    psíquico: 1,
    bicho: 1,
    roca: 2,
    fantasma: 1,
    dragón: 0.5,
    siniestro: 1,
    acero: 1,
  },
  eléctrico: {
    normal: 1,
    fuego: 1,
    agua: 2,
    eléctrico: 0.5,
    planta: 0.5,
    hielo: 1,
    lucha: 1,
    veneno: 1,
    tierra: 0,
    volador: 2,
    psíquico: 1,
    bicho: 1,
    roca: 1,
    fantasma: 1,
    dragón: 0.5,
    siniestro: 1,
    acero: 1,
  },
  planta: {
    normal: 1,
    fuego: 0.5,
    agua: 2,
    eléctrico: 1,
    planta: 0.5,
    hielo: 1,
    lucha: 1,
    veneno: 0.5,
    tierra: 2,
    volador: 0.5,
    psíquico: 1,
    bicho: 0.5,
    roca: 2,
    fantasma: 1,
    dragón: 0.5,
    siniestro: 1,
    acero: 0.5,
  },
  hielo: {
    normal: 1,
    fuego: 0.5,
    agua: 0.5,
    eléctrico: 1,
    planta: 2,
    hielo: 0.5,
    lucha: 1,
    veneno: 1,
    tierra: 2,
    volador: 2,
    psíquico: 1,
    bicho: 1,
    roca: 1,
    fantasma: 1,
    dragón: 2,
    siniestro: 1,
    acero: 0.5,
  },
  lucha: {
    normal: 2,
    fuego: 1,
    agua: 1,
    eléctrico: 1,
    planta: 1,
    hielo: 2,
    lucha: 1,
    veneno: 0.5,
    tierra: 1,
    volador: 0.5,
    psíquico: 0.5,
    bicho: 0.5,
    roca: 2,
    fantasma: 0,
    dragón: 1,
    siniestro: 2,
    acero: 2,
  },
  veneno: {
    normal: 1,
    fuego: 1,
    agua: 1,
    eléctrico: 1,
    planta: 2,
    hielo: 1,
    lucha: 1,
    veneno: 0.5,
    tierra: 0.5,
    volador: 1,
    psíquico: 1,
    bicho: 1,
    roca: 0.5,
    fantasma: 0.5,
    dragón: 1,
    siniestro: 1,
    acero: 0,
  },
  tierra: {
    normal: 1,
    fuego: 2,
    agua: 1,
    eléctrico: 2,
    planta: 0.5,
    hielo: 1,
    lucha: 1,
    veneno: 2,
    tierra: 1,
    volador: 0,
    psíquico: 1,
    bicho: 0.5,
    roca: 2,
    fantasma: 1,
    dragón: 1,
    siniestro: 1,
    acero: 2,
  },
  volador: {
    normal: 1,
    fuego: 1,
    agua: 1,
    eléctrico: 0.5,
    planta: 2,
    hielo: 1,
    lucha: 2,
    veneno: 1,
    tierra: 1,
    volador: 1,
    psíquico: 1,
    bicho: 2,
    roca: 0.5,
    fantasma: 1,
    dragón: 1,
    siniestro: 1,
    acero: 0.5,
  },
  psíquico: {
    normal: 1,
    fuego: 1,
    agua: 1,
    eléctrico: 1,
    planta: 1,
    hielo: 1,
    lucha: 2,
    veneno: 2,
    tierra: 1,
    volador: 1,
    psíquico: 0.5,
    bicho: 1,
    roca: 1,
    fantasma: 1,
    dragón: 1,
    siniestro: 0,
    acero: 0.5,
  },
  bicho: {
    normal: 1,
    fuego: 0.5,
    agua: 1,
    eléctrico: 1,
    planta: 2,
    hielo: 1,
    lucha: 0.5,
    veneno: 0.5,
    tierra: 1,
    volador: 0.5,
    psíquico: 2,
    bicho: 1,
    roca: 1,
    fantasma: 0.5,
    dragón: 1,
    siniestro: 2,
    acero: 0.5,
  },
  roca: {
    normal: 1,
    fuego: 2,
    agua: 1,
    eléctrico: 1,
    planta: 1,
    hielo: 2,
    lucha: 0.5,
    veneno: 1,
    tierra: 0.5,
    volador: 2,
    psíquico: 1,
    bicho: 2,
    roca: 1,
    fantasma: 1,
    dragón: 1,
    siniestro: 1,
    acero: 0.5,
  },
  fantasma: {
    normal: 0,
    fuego: 1,
    agua: 1,
    eléctrico: 1,
    planta: 1,
    hielo: 1,
    lucha: 1,
    veneno: 1,
    tierra: 1,
    volador: 1,
    psíquico: 2,
    bicho: 1,
    roca: 1,
    fantasma: 2,
    dragón: 1,
    siniestro: 0.5,
    acero: 0.5,
  },
  dragón: {
    normal: 1,
    fuego: 1,
    agua: 1,
    eléctrico: 1,
    planta: 1,
    hielo: 1,
    lucha: 1,
    veneno: 1,
    tierra: 1,
    volador: 1,
    psíquico: 1,
    bicho: 1,
    roca: 1,
    fantasma: 1,
    dragón: 2,
    siniestro: 1,
    acero: 0.5,
  },
  siniestro: {
    normal: 1,
    fuego: 1,
    agua: 1,
    eléctrico: 1,
    planta: 1,
    hielo: 1,
    lucha: 0.5,
    veneno: 1,
    tierra: 1,
    volador: 1,
    psíquico: 2,
    bicho: 1,
    roca: 1,
    fantasma: 2,
    dragón: 1,
    siniestro: 0.5,
    acero: 0.5,
  },
  acero: {
    normal: 1,
    fuego: 0.5,
    agua: 0.5,
    eléctrico: 0.5,
    planta: 1,
    hielo: 2,
    lucha: 1,
    veneno: 1,
    tierra: 1,
    volador: 1,
    psíquico: 1,
    bicho: 1,
    roca: 2,
    fantasma: 1,
    dragón: 1,
    siniestro: 1,
    acero: 0.5,
  },
};

export const TYPE_CHART_WEAKNESSES: Record<
  PokemonType,
  Record<PokemonType, number>
> = {
  normal: {
    normal: 1,
    fuego: 1,
    agua: 1,
    eléctrico: 1,
    planta: 1,
    hielo: 1,
    lucha: 2,
    veneno: 1,
    tierra: 1,
    volador: 1,
    psíquico: 1,
    bicho: 1,
    roca: 1,
    fantasma: 0,
    dragón: 1,
    siniestro: 1,
    acero: 1,
    hada: 1,
  },
  fuego: {
    normal: 1,
    fuego: 0.5,
    agua: 2,
    eléctrico: 1,
    planta: 0.5,
    hielo: 0.5,
    lucha: 1,
    veneno: 1,
    tierra: 2,
    volador: 1,
    psíquico: 1,
    bicho: 0.5,
    roca: 2,
    fantasma: 1,
    dragón: 1,
    siniestro: 1,
    acero: 0.5,
    hada: 0.5,
  },
  agua: {
    normal: 1,
    fuego: 0.5,
    agua: 0.5,
    eléctrico: 2,
    planta: 2,
    hielo: 0.5,
    lucha: 1,
    veneno: 1,
    tierra: 1,
    volador: 1,
    psíquico: 1,
    bicho: 1,
    roca: 1,
    fantasma: 1,
    dragón: 1,
    siniestro: 1,
    acero: 0.5,
    hada: 1,
  },
  eléctrico: {
    normal: 1,
    fuego: 1,
    agua: 1,
    eléctrico: 0.5,
    planta: 1,
    hielo: 1,
    lucha: 1,
    veneno: 1,
    tierra: 2,
    volador: 0.5,
    psíquico: 1,
    bicho: 1,
    roca: 1,
    fantasma: 1,
    dragón: 1,
    siniestro: 1,
    acero: 0.5,
    hada: 1,
  },
  planta: {
    normal: 1,
    fuego: 2,
    agua: 0.5,
    eléctrico: 0.5,
    planta: 0.5,
    hielo: 2,
    lucha: 1,
    veneno: 2,
    tierra: 0.5,
    volador: 2,
    psíquico: 1,
    bicho: 2,
    roca: 1,
    fantasma: 1,
    dragón: 1,
    siniestro: 1,
    acero: 1,
    hada: 1,
  },
  hielo: {
    normal: 1,
    fuego: 2,
    agua: 1,
    eléctrico: 1,
    planta: 1,
    hielo: 0.5,
    lucha: 2,
    veneno: 1,
    tierra: 1,
    volador: 1,
    psíquico: 1,
    bicho: 1,
    roca: 2,
    fantasma: 1,
    dragón: 1,
    siniestro: 1,
    acero: 2,
    hada: 1,
  },
  lucha: {
    normal: 1,
    fuego: 1,
    agua: 1,
    eléctrico: 1,
    planta: 1,
    hielo: 1,
    lucha: 1,
    veneno: 1,
    tierra: 1,
    volador: 2,
    psíquico: 2,
    bicho: 0.5,
    roca: 0.5,
    fantasma: 1,
    dragón: 1,
    siniestro: 0.5,
    acero: 1,
    hada: 2,
  },
  veneno: {
    normal: 1,
    fuego: 1,
    agua: 1,
    eléctrico: 1,
    planta: 0.5,
    hielo: 1,
    lucha: 0.5,
    veneno: 0.5,
    tierra: 2,
    volador: 1,
    psíquico: 2,
    bicho: 0.5,
    roca: 1,
    fantasma: 1,
    dragón: 1,
    siniestro: 1,
    acero: 1,
    hada: 0.5,
  },
  tierra: {
    normal: 1,
    fuego: 1,
    agua: 2,
    eléctrico: 0,
    planta: 2,
    hielo: 2,
    lucha: 1,
    veneno: 0.5,
    tierra: 1,
    volador: 1,
    psíquico: 1,
    bicho: 1,
    roca: 0.5,
    fantasma: 1,
    dragón: 1,
    siniestro: 1,
    acero: 1,
    hada: 0.5,
  },
  volador: {
    normal: 1,
    fuego: 1,
    agua: 1,
    eléctrico: 2,
    planta: 0.5,
    hielo: 2,
    lucha: 0.5,
    veneno: 1,
    tierra: 0,
    volador: 1,
    psíquico: 1,
    bicho: 0.5,
    roca: 2,
    fantasma: 1,
    dragón: 1,
    siniestro: 1,
    acero: 1,
    hada: 1,
  },
  psíquico: {
    normal: 1,
    fuego: 1,
    agua: 1,
    eléctrico: 1,
    planta: 1,
    hielo: 1,
    lucha: 0.5,
    veneno: 1,
    tierra: 1,
    volador: 1,
    psíquico: 0.5,
    bicho: 2,
    roca: 1,
    fantasma: 2,
    dragón: 1,
    siniestro: 2,
    acero: 1,
    hada: 1,
  },
  bicho: {
    normal: 1,
    fuego: 2,
    agua: 1,
    eléctrico: 1,
    planta: 0.5,
    hielo: 1,
    lucha: 0.5,
    veneno: 1,
    tierra: 0.5,
    volador: 2,
    psíquico: 1,
    bicho: 1,
    roca: 2,
    fantasma: 1,
    dragón: 1,
    siniestro: 1,
    acero: 1,
    hada: 1,
  },
  roca: {
    normal: 0.5,
    fuego: 0.5,
    agua: 2,
    eléctrico: 1,
    planta: 2,
    hielo: 1,
    lucha: 2,
    veneno: 0.5,
    tierra: 2,
    volador: 0.5,
    psíquico: 1,
    bicho: 1,
    roca: 1,
    fantasma: 1,
    dragón: 1,
    siniestro: 1,
    acero: 2,
    hada: 1,
  },
  fantasma: {
    normal: 0,
    fuego: 1,
    agua: 1,
    eléctrico: 1,
    planta: 1,
    hielo: 1,
    lucha: 0,
    veneno: 0.5,
    tierra: 1,
    volador: 1,
    psíquico: 1,
    bicho: 0.5,
    roca: 1,
    fantasma: 2,
    dragón: 1,
    siniestro: 2,
    acero: 1,
    hada: 1,
  },
  dragón: {
    normal: 1,
    fuego: 0.5,
    agua: 0.5,
    eléctrico: 0.5,
    planta: 0.5,
    hielo: 2,
    lucha: 1,
    veneno: 1,
    tierra: 1,
    volador: 1,
    psíquico: 1,
    bicho: 1,
    roca: 1,
    fantasma: 1,
    dragón: 2,
    siniestro: 1,
    acero: 1,
    hada: 2,
  },
  siniestro: {
    normal: 1,
    fuego: 1,
    agua: 1,
    eléctrico: 1,
    planta: 1,
    hielo: 1,
    lucha: 2,
    veneno: 1,
    tierra: 1,
    volador: 1,
    psíquico: 0,
    bicho: 2,
    roca: 1,
    fantasma: 0.5,
    dragón: 1,
    siniestro: 0.5,
    acero: 1,
    hada: 2,
  },
  acero: {
    normal: 0.5,
    fuego: 2,
    agua: 1,
    eléctrico: 1,
    planta: 0.5,
    hielo: 0.5,
    lucha: 2,
    veneno: 0,
    tierra: 2,
    volador: 0.5,
    psíquico: 0.5,
    bicho: 0.5,
    roca: 0.5,
    fantasma: 0.5,
    dragón: 0.5,
    siniestro: 0.5,
    acero: 0.5,
    hada: 0.5,
  },
  hada: {
    normal: 1,
    fuego: 1,
    agua: 1,
    eléctrico: 1,
    planta: 1,
    hielo: 1,
    lucha: 0.5,
    veneno: 2,
    tierra: 1,
    volador: 1,
    psíquico: 1,
    bicho: 0.5,
    roca: 1,
    fantasma: 1,
    dragón: 0,
    siniestro: 0.5,
    acero: 2,
    hada: 1,
  },
};

const defaultDamageRelation: Record<PokemonType, number> = {
  normal: 1,
  fuego: 1,
  agua: 1,
  eléctrico: 1,
  planta: 1,
  hielo: 1,
  lucha: 1,
  veneno: 1,
  tierra: 1,
  volador: 1,
  psíquico: 1,
  bicho: 1,
  roca: 1,
  fantasma: 1,
  dragón: 1,
  siniestro: 1,
  acero: 1,
  hada: 1,
};

export function getDefaultDamageRelation(): Record<PokemonType, number> {
  return JSON.parse(JSON.stringify(defaultDamageRelation));
}

export function getDamageRelation(
  types: PokemonType[],
): Record<PokemonType, number> {
  if (types.length == 1) {
    return TYPE_CHART_WEAKNESSES[types[0]];
  } else {
    const chart1 = { ...TYPE_CHART_WEAKNESSES[types[0]] };
    const chart2 = TYPE_CHART_WEAKNESSES[types[1]];

    for (const pokemonType in chart1) {
      if (
        chart1.hasOwnProperty(pokemonType) &&
        chart2.hasOwnProperty(pokemonType)
      ) {
        chart1[pokemonType as PokemonType] *=
          chart2[pokemonType as PokemonType];
      }
    }
    return chart1;
  }
}
